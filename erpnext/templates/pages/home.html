{% extends "templates/web.html" %}
{% from "erpnext/templates/includes/macros.html" import product_image_square, homepage_section %}

{% block content %}
<main>
	<section class="hero-section border-bottom" style="background-image: url('{{ homepage.hero_image }}')">
		<div class="container py-5">
			<h1 class="d-none d-sm-block display-4">{{ homepage.title }}</h1>
			<h1 class="d-block d-sm-none">{{ homepage.title }}</h1>
			<h2 class="d-none d-sm-block">{{ homepage.tag_line }}</h2>
			<h3 class="d-block d-sm-none">{{ homepage.tag_line }}</h3>
		</div>

		<div class="container">
			<a href="{{ explore_link }}" class="mb-5 btn btn-primary">{{ _('Explore') }}</a>
		</div>
	</section>

	{% if homepage.products %}
	<section class="container section-products my-5">
		<h3>{{ _('Products') }}</h3>

		<div class="row">
			{% for item in homepage.products %}
			<div class="col-md-4 mb-4">
				<div class="card h-100 justify-content-between">
					<div class="lazy-image" data-class="card-img-top" data-src="{{ item.image }}" data-alt="{{ item.item_name }}"></div>
					<div class="card-body flex-grow-0">
						<h5 class="card-title">{{ item.item_name }}</h5>
						<a href="{{ item.route }}" class="card-link">{{ _('More details') }}</a>
					</div>
				</div>
			</div>
			{% endfor %}
		</div>
	</section>
	{% endif %}

	{% if blogs %}
	<section class="container my-5">
		<h3>{{ _('Publications') }}</h3>

		<div class="row">
			{% for blog in blogs %}
			<div class="col-md-4 mb-4">
				<div class="card h-100">
					<div class="card-body">
						<h5 class="card-title">{{ blog.title }}</h5>
						<p class="card-subtitle mb-2 text-muted">{{ _('By {0}').format(blog.blogger) }}</p>
						<p class="card-text">{{ blog.blog_intro }}</p>
					</div>
					<div class="card-body flex-grow-0">
						<a href="{{ blog.route }}" class="card-link">{{ _('Read blog') }}</a>
					</div>
				</div>
			</div>
			{% endfor %}
		</div>
	</section>
	{% endif %}

	{% for section in homepage_sections %}
	{% if section.custom_html %}
		{{ section.section_html }}
	{% else %}
	<section class="container my-5">
		<h3>{{ section.name }}</h3>

		<div class="row">
			{% for card in section.section_cards %}
			<div class="col-md-{{ section.column_value }} mb-4">
				<div class="card h-100 justify-content-between">
					{% if card.image %}
					<div class="lazy-image" data-src="{{ card.image }}"></div>
					{% endif %}
					<div class="card-body">
						<h5 class="card-title">{{ card.title }}</h5>
						<p class="card-subtitle mb-2 text-muted">{{ card.subtitle or '' }}</p>
						<p class="card-text">{{ card.content | truncate(140, True) }}</p>
					</div>
					<div class="card-body flex-grow-0">
						<a href="{{ card.route }}" class="card-link">{{ _('More details') }}</a>
					</div>
				</div>
			</div>
			{% endfor %}
		</div>
	</section>
	{% endif %}

	{% endfor %}
</main>
{% endblock %}
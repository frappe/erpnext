{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2021-06-05 17:58:11.997438",
 "css": ".textcenter{\n        text-align:center;\n}\n.borderclass{\n    border-bottom: 1px solid dodgerblue;\n}\ntable {\n    width:100%;\n    text-align:left;\n    border-collapse: collapse;\n}\n\ntable, td, th {\n    /*width:50%;*/\n    border: 1px solid dodgerblue;\n    font-size:10px;\n    \n}\n.print-format{\n    padding: 12px !important;\n}",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Sales Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "html": "{% set address %}{% endset %}\n{% if doc.company_address %}\n    {%- set address=frappe.get_doc(\"Address\",doc.company_address) -%}\n{% endif %}\n\n{% set so %}{% endset %}\n{%for i in doc.items%}\n{% if i.sales_order %}\n    {%- set so=frappe.get_doc(\"Sales Order\",i.sales_order) -%}\n{% endif %}\n{%endfor%}\n\n{% set b_address %}{% endset %}\n{% if doc.customer_address %}\n    {%- set b_address=frappe.get_doc(\"Address\",doc.customer_address) -%}\n{% endif %}\n\n{% set s_address %}{% endset %}\n{% if doc.shipping_address_name %}\n    {% set s_address=frappe.get_doc(\"Address\",doc.shipping_address_name) %}\n{% endif %}\n\n{% set bd %}{% endset %}\n{% if doc.company %}\n    {% set bd=frappe.get_doc(\"Bank Account\",{\"company\":doc.company,\"is_default\":1}) %}\n{% endif %}\n\n{% set disc_col=[] %}\n{% for disc_per in doc.items %}\n    {% if disc_per.discount_percentage %}\n        {% set disc_col = disc_col.append(disc_per.discount_percentage) %}\n    {% endif %}\n{% endfor %}\n\n{% if doc.additional_discount_percentage %}\n    {% set rowspan = doc.taxes|length + 3 %}\n{% else %}\n    {% set rowspan = doc.taxes|length + 2 %}\n{% endif %}\n{% set company_upi %}{% endset %}\n{% if doc.company %}\n    {% set company_upi = frappe.get_doc(\"Company\",doc.company) %}\n{% endif %}\n\n<!DOCTYPE HTML>\n<div class=\"row\">\n    <div class=\"col-xs-9\" style=\"text-align: left;font-size: 10px;\">\n        Invoice issued by under section 31 Rule 7 of CGST Act 2017 read with rule 1 of tax invoice.  \n    </div>\n    <div class=\"col-xs-3\" style=\"text-align: right;\">\n        <b>{{ _(\"Original for Recipient\") }}</b>\n    </div>\n</div>\n<table>\n    <tr>\n        <td>\n            {% if letter_head %}\n                {{ letter_head }}\n            {% endif %}\n        </td>\n        {% if doc.qrcode_image %}\n            <td style=\"width: 18%;\">\n                <div><img src=\"{{doc.qrcode_image}}\"></div>\n            </td>\n        {% endif %}\n    </tr>\n</table>\n<table>\n    <tr>\n        <td style=\"text-align: center; font-size: 12px;\">\n            <b>TAX INVOICE</b>\n        </td>\n    </tr>\n</table>\n<div style=\"width:100%;font-size: 15px;\">\n    <table>\n        <tr>\n            <td style=\"width: 50%;\">\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"Tax Invoice\") }}:</b>&nbsp; <span style=\"font-size: 10px\"><b>\n                        {% if doc.name %}\n                            {{ doc.name }}\n                        {% endif %}</b></span>\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"Invoice Date\") }}:</b>&nbsp; \n                        {% if doc.posting_date %}\n                            {{ doc.get_formatted(\"posting_date\") }}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"Sales Order No.\") }}:</b>&nbsp;\n                        {%for i in doc.items%}\n                        {%if i.idx==1%}\n                        {% if i.sales_order %}\n                            {{i.sales_order}}\n                        {% endif %}\n                        {% endif %}\n                        {%endfor%}\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"SO Date\") }}:</b>&nbsp;\n                        {%for i in doc.items%}\n                        {%if i.idx==1%}\n                        {% if i.sales_order %}\n                            {%- set so=frappe.get_doc(\"Sales Order\",i.sales_order) -%}\n                            {% if so.transaction_date %}\n                                {{so.get_formatted(\"transaction_date\")}}\n                            {% endif %}\n                        {% endif %}\n                        {% endif %}\n                        {%endfor%}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"PO No.\") }}:</b>&nbsp;\n                        {% if doc.po_no %} \n                            {{ doc.po_no }} \n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"PO Date\") }}:</b>&nbsp;\n                        {% if doc.po_date %}\n                            {{ doc.get_formatted(\"po_date\") }}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"State\") }}:</b>&nbsp;\n                        {% if address.gst_state %}\n                            {{address.gst_state}}\n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"State Code\") }}:</b>&nbsp;\n                        {% if doc.company_gstin %}\n                            {{doc.company_gstin[0:2]}}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"GSTIN\") }}:</b>&nbsp;\n                        {% if doc.company_gstin %}\n                            {{doc.company_gstin}}\n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"PAN\") }}:</b>&nbsp;\n                        {% if doc.company_gstin %}\n                            {{doc.company_gstin[2:-3]}}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"Invoice Type\") }}:</b>&nbsp; Regular\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"Reverse Charge \") }}:</b>&nbsp; \n                        {% if doc.reverse_charge %}\n                            {{ doc.reverse_charge }}\n                        {% endif %}\n                    </div>\n                </div>\n            </td>\n            <td style=\"width: 50%;\">\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">\n                        <b>{{ _(\"Transporter Name\") }}: </b>&nbsp;\n                        {% if doc.transporter_name %} \n                            {{ doc.transporter_name }} \n                        {% endif %}\n                    </div>\n                    \n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">\n                        <b>{{ _(\"Destination\") }}:</b>&nbsp;\n                        {%for i in doc.items%}\n                         {%if i.idx==1%}\n                        {% if i.sales_order %}\n                            {%- set so=frappe.get_doc(\"Sales Order\",i.sales_order) -%}\n                           {% if so.warehouse_address %}{{so.warehouse_address}}{% endif %}\n                        {% endif %}\n                        {% endif %}\n                        {%endfor%}\n                            \n                    </div>\n                </div> \n                <div class=\"row\">\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"Mode Of Trans.\") }}: </b>&nbsp;\n                        {% if doc.mode_of_transport %}\n                            {{ doc.mode_of_transport }}\n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"VEH No\")}}:</b>&nbsp;\n                        {% if doc.vehicle_no %}\n                            {{doc.vehicle_no}}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"LR No.\") }}: </b>&nbsp;\n                        {% if doc.lr_no %} \n                            {{ doc.lr_no }} \n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"LR Date\") }}: </b>&nbsp;\n                        {% if doc.lr_date %}\n                            {{ doc.get_formatted(\"lr_date\") }}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"Freight\") }}: </b>&nbsp;\n                         {%for i in doc.items%}\n                          {%if i.idx==1%}\n                        {% if i.sales_order %}\n                            {%- set so=frappe.get_doc(\"Sales Order\",i.sales_order) -%}\n                           {% if so.freight %}\n                            {{ so.freight }}\n                            {% endif %}\n                        {% endif %}\n                        {% endif %}\n                        {%endfor%}\n                        \n                    </div>\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"Due Date\") }}:</b>&nbsp; \n                        {% if doc.posting_date %}\n                            {{ doc.get_formatted(\"posting_date\") }}\n                        {% endif %}    \n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">\n                            <b>{{ _(\"Place Of Supply\") }}:</b>&nbsp;\n                            {% if s_address.city %} {{s_address.city}} {% endif %}\n                            {% if s_address.state %} &nbsp;-&nbsp;{{s_address.state}} {% endif %}\n                    </div>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"text-center\" style=\"width: 50%;\">\n                <b>{{ _(\"Details of Receiver(Bill to)\")}}</b>\n            </td>\n            <td class=\"text-center\" style=\"width: 50%;\">\n                <b>{{ _(\"Details of Consignee(Shipped to)\")}}</b>\n            </td>\n        </tr>\n        <tr>\n            <td style=\"width: 50%;\">\n                \n                <b>{{ _(\"Customer Name\") }}:&nbsp;\n                {% if b_address.address_title %}\n                    {{b_address.address_title}}\n                {% endif %} </b><br>\n                <b>{{ _(\"Address\") }}:</b>&nbsp; \n                {% if b_address.address_line1 %} \n                    {{b_address.address_line1}}, \n                {% endif %}<br>\n                {% if b_address.address_line2 %} \n                    {{b_address.address_line2}} ,\n                {% endif %}<br>\n                {% if b_address.city %} \n                    {{b_address.city}} \n                {% endif %}\n                {% if b_address.pincode %} \n                    -{{b_address.pincode}}, \n                {% endif %}\n                {% if b_address.gst_state %} \n                    {{b_address.gst_state}}, \n                {% endif %}\n                {% if b_address.country %} \n                    {{b_address.country}}.\n                {% endif %}<br>\n                <b>{{ _(\"Mobile No.\") }}:</b>&nbsp;\n                {% if b_address.phone %}\n                    {{b_address.phone}}\n                {% endif %}<br>\n                <b>{{ _(\"Email\") }}:</b>&nbsp;\n                {% if b_address.email_id %}\n                    {{b_address.email_id}}\n                {% endif %}<br>\n                <b>{{ _(\"Customer GSTIN\") }}:</b>&nbsp;\n                {% if b_address.gstin %}\n                    {{b_address.gstin}}\n                {% endif %}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                <b>{{ _(\"State Code\") }}:</b>&nbsp;\n                {% if b_address.gst_state_number %}\n                    {{b_address.gst_state_number}} \n                {% endif %}\n\n            </td>\n            <td style=\"width: 50%;\">\n                \n                <b>{{ _(\"Customer Name\") }}:&nbsp;\n                    {% if s_address.address_line1 %}\n                        {{s_address.address_title}}\n                    {% endif %}\n                </b><br>\n                <b>{{ _(\"Address\") }}:</b>&nbsp; \n                    {% if s_address.address_line1 %} \n                        {{s_address.address_line1}}, \n                    {% endif %}\n                <br>\n                {% if s_address.address_line2 %} \n                    {{s_address.address_line2}}, \n                {% endif %}<br>\n                {% if s_address.city %} \n                    {{s_address.city}} \n                {% endif %}\n                {% if s_address.pincode %} \n                    -{{s_address.pincode}}, \n                {% endif %}\n                {% if s_address.gst_state %} \n                    {{s_address.gst_state}}, \n                {% endif %}\n                {% if s_address.country %} \n                    {{s_address.country}}. \n                {% endif %}<br>\n                <b>{{ _(\"Mobile No.\") }}:</b>&nbsp;\n                {% if s_address.phone %}\n                    {{s_address.phone}}\n                {% endif %}<br>\n                <b>{{ _(\"Email\") }}:</b>&nbsp;\n                {% if s_address.email_id %}\n                    {{s_address.email_id}}\n                {% endif %}<br>\n                <b>{{ _(\"Customer GSTIN\") }}:</b>&nbsp;\n                {% if s_address.gstin %}\n                    {{s_address.gstin}}\n                {% endif %}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                <b>{{ _(\"State Code\") }}:</b>&nbsp;\n                    {% if s_address.gst_state_number %}\n                        {{s_address.gst_state_number}}\n                    {% endif %}\n            </td>\n        </tr>\n    </table>\n    <table style=\"margin-top: 2px;\">\n        <tr>\n            <th><b>{{ _(\"Sr No.\") }}</b></th>\n            <th><b>{{ _(\"Item Name\") }}</b></th>\n            <th><b>{{ _(\"HSN\") }}</b></th>\n            <th><b>{{ _(\"MFG Date\") }}</b></th>\n            <th><b>{{ _(\"EXP Date\") }}</b></th>\n            <th><b>{{ _(\"Qty Packing\") }}</b></th>\n            <th><b>{{ _(\"Rate\") }}</b></th>\n            \n            <th><b>{{ _(\"Amount\") }}</b></th>\n        </tr>\n        {%- for item in doc.items -%}\n        {% set batch %}{% endset %}\n        {% if item.batch_no %}\n            {% set batch = frappe.get_doc(\"Batch\",item.batch_no) %}\n        {% endif %}\n        <tr>\n            <td style=\"text-align: center;\">{{ loop.index }}</td>\n            <td>{{ item.item_name }}\n                {% if item.batch_no %}\n                    <br><span style=\"font-size: 9px\"><b>Batch:</b>&nbsp;\n                    {{ item.batch_no }}</span>\n                {% endif %}\n                {% if item.customer_item_code %}\n                    <br><span style=\"font-size: 9px\"><b>Cust. Item Name</b>&nbsp;\n                    {{ item.customer_item_code }}</span>\n                {% endif %}\n            </td>\n            <td>\n                {% if item.gst_hsn_code %}\n                    {{ item.gst_hsn_code }}\n                {% endif %}\n            </td>\n            <td style=\"text-align: center;\"> \n                {% if batch.manufacturing_date %}\n                    {{ batch.get_formatted(\"manufacturing_date\") }}\n                {% endif %}\n            </td>\n            <td style=\"text-align: center;\">\n                 {% if batch.expiry_date %}\n                    {{ batch.get_formatted(\"expiry_date\") }}\n                {% endif %}\n            </td>\n            <td style=\"text-align: center;\">\n              \n                {%if item.packing_weight%}\n                {% if item.total_weight %}\n                    {{item.total_weight}}\n                {% endif %}&nbsp;\n                {% if item.weight_uom %}\n                    {{item.weight_uom}}\n                {% endif %}<br>\n                  {{(item.qty/item.packing_weight) | int}} Nos X {{item.packing_weight | float}} KG PKG\n                {% endif %}\n                \n                {%if not item.packing_weight%}\n                \n                {% if item.total_weight %}\n                    {{item.total_weight}}\n                {% endif %}&nbsp;\n                {% if item.weight_uom %}\n                    {{item.weight_uom}}\n                {% endif %}<br>\n                {% if item.qty %}\n                    {{item.qty}}\n                {% endif %}&nbsp;\n                {% if item.uom %}\n                    {{item.uom}}\n                {% endif %}&nbsp;*&nbsp;\n                {% if item.conversion_factor %}\n                    {{item.conversion_factor}}\n                {% endif %}\n                {% endif %}\n            </td>\n            <td style=\"text-align: right;\">\n            {% if item.stock_uom_rate %}\n                {{ item.get_formatted(\"stock_uom_rate\") }}\n            {% endif %}</td>\n            \n            <td style=\"text-align: right;width:12%;\">\n            {% if item.amount %}\n                {{ item.get_formatted(\"amount\") }}\n            {% endif %}</td>\n        </tr>\n        {%- endfor -%}\n        <tr>\n            <th></th>\n            <th></th>\n            <th></th>\n            <th></th>\n            <th style=\"text-align: center;\"><b>{{ _(\"Total\") }}</b></th>\n            <th style=\"text-align: center;\"><b>{{doc.get_formatted(\"total_net_weight\")}}&nbsp;KG</b></th>\n            <th></th>\n            \n            <th style=\"text-align: right;\"><b>{{ doc.get_formatted(\"total\") }}</b></th>\n        </tr>\n    </table>\n    \n\n    <table style=\"margin-top: 2px;\">\n        <tr>\n            <td rowspan =\"{{ rowspan }}\" style =\"width:57%;\">\n                <b>Total Amount in Words:</b><br>\n                {% if doc.in_words %}\n                    {{ doc.in_words }}\n                {% endif %}\n                <hr style=\"margin-bottom: 2px;margin-top: 2px;\">\n                <b>Payment Terms:</b>&nbsp;\n                {% if doc.payment_terms_template %}\n                    {{doc.payment_terms_template}}\n                {% endif %}<br>\n                <b>{{ _(\"E-Waybill Number\") }}:</b>&nbsp;\n                {% if doc.ewaybill %}\n                    {{doc.ewaybill}}\n                {% endif %} &nbsp;&nbsp;\n                <b>{{ _(\"E-Waybill Date \") }}:</b>&nbsp; \n                {% if doc.e_way_bill_date %} \n                    {{doc.get_formatted(\"e_way_bill_date\")}}\n                {% endif %}\n            </td>\n            <td style =\"width:28%;\" class =\"text-right\">\n                <b>Total Amount:</b>\n            </td>\n            <td style =\"width:11%;\" class =\"text-right\">{{ doc.get_formatted(\"total\") }}</td>\n        </tr>\n        {% if doc.additional_discount_percentage %}\n            <tr>\n                <td style =\"width:28%;\" class =\"text-right\"><b>Additional Disc. on {{doc.apply_discount_on}}: &nbsp;{{doc.additional_discount_percentage}}%</b></td>\n                <td style =\"width:11%;\" class =\"text-right\"> -&nbsp;{{ doc.get_formatted(\"discount_amount\")}}</td>\n            </tr>\n        {% endif %}\n        <tr>\n            <td style =\"width:28%;\" class =\"text-right\"><b>Taxable Value:</b></td>\n            <td style =\"width:11%;\" class =\"text-right\"> &nbsp;\n            {{ doc.get_formatted(\"net_total\")}}</td>\n        </tr>\n        {%- for tax in doc.taxes -%}\n        <tr>\n            <td style =\"width:28%;\" class =\"text-right\">\n                <b>{{ tax.description }}</b>\n            </td>\n            <td style =\"width:11%;\" class =\"text-right\">\n                {{ tax.get_formatted(\"tax_amount\") }}\n            </td>\n        </tr>\n        {%- endfor -%}\n        <tr>\n            <td style =\"width:57%;\">\n                \n                <b>Account Name :</b>&nbsp;\n                {% if bd.account_name %}\n                    {{bd.account_name}}\n                {% endif %}<br>\n            </td>\n            <td style =\"width:28%;\" class =\"text-right\"><b>Total:</b></td>\n            <td style =\"width:11%;\" class =\"text-right\"> {{ doc.get_formatted(\"grand_total\")}}</td>\n        </tr>\n        <tr>\n            \n            <td style =\"width:57%;\"><b>Bank Name :</b>&nbsp;\n                {% if bd.bank %}\n                    {{bd.bank}}\n                {% endif %}\n                &nbsp;&nbsp;&nbsp;<b>Account Number :</b>&nbsp;\n                {% if bd.bank_account_no %}\n                    {{bd.bank_account_no}}\n                {% endif %}</td>\n            <td style =\"width:28%;\" class =\"text-right\"><b>Round Off Amount :</b></td>\n            <td style =\"width:11%;\" class =\"text-right\"> {{ doc.get_formatted(\"rounding_adjustment\")}}</td>\n        </tr>\n        <tr>\n            \n            <td style =\"width:57%;\"><b>IFSC Code :</b>&nbsp;\n                {% if bd.ifsc_code %}\n                    {{bd.ifsc_code}}\n                {% endif %}\n                &nbsp;&nbsp;&nbsp;<b>Branch Code :</b>&nbsp;\n                {% if bd.branch_code %}\n                    {{bd.branch_code}}\n                {% endif %}<br></td>\n            <td style =\"width:28%;\" class =\"text-right\"><b>Invoice Value :</b></td>\n            <td style =\"width:11%;\" class =\"text-right\"> {{ doc.get_formatted(\"rounded_total\")}}</td>\n        </tr>\n    </table>\n    {% if doc.other_charges_calculation %}\n    <div style=\"margin-top: -15px; margin-bottom: -15px;\">{{ doc.other_charges_calculation }} </div>\n    {% endif %}\n    <table style=\"margin-top: 0px;\">\n        <tr>\n            <td style =\"width:50%;\" rowspan =\"\"><b>Terms and Conditions :</b><br>\n                {% if doc.terms %}\n                    <span style=\"font-size: 7px;\">{{ doc.terms }}</span>\n                {% endif %}                \n            </td>\n            {% if company_upi.upi_qr_code_image %}\n                <td style=\"width: 20%\">\n                    <div><img src=\"{% if company_upi.upi_qr_code_image %}{{company_upi.upi_qr_code_image}}{% endif %}\" width=\"130\" height=\"130\"></div>\n                    <div class=\"text-center\"><b>UPI ID:{% if company_upi.upi_id %}{{ company_upi.upi_id }}{% endif %}</b></div>\n                </td>\n            {% endif %}\n            <td style=\"font-size:10px; width: 30%\"><br>\n                <p class=\"text-center\">For <b>\n                {% if doc.company %}\n                    {{doc.company}}\n                {% endif %}</b><br></p><br><br><br><br><br><br><br><br>\n                <p class =\"text-center\"><b>Authorised Signatory</b></p>\n            </td>\n        </tr>\n    </table>\n</div>\n\n\n<div class=\"page-break\"></div>\n\n<div class=\"row\">\n    <div class=\"col-xs-8\" style=\"text-align: left;font-size: 10px;\">\n        Invoice issued by under section 31 Rule 7 of CGST Act 2017 read with rule 1 of tax invoice.  \n    </div>\n    <div class=\"col-xs-4\" style=\"text-align: right;\">\n        <b>{{ _(\"Duplicate for Transporter\") }}</b>\n    </div>\n</div>\n<table>\n    <tr>\n        <td>\n            {% if letter_head %}\n                {{ letter_head }}\n            {% endif %}\n        </td>\n        {% if doc.qrcode_image %}\n            <td style=\"width: 18%;\">\n                <div><img src=\"{{doc.qrcode_image}}\"></div>\n            </td>\n        {% endif %}\n    </tr>\n</table>\n<table>\n    <tr>\n        <td style=\"text-align: center; font-size: 12px;\">\n            <b>TAX INVOICE</b>\n        </td>\n    </tr>\n</table>\n<div style=\"width:100%;font-size: 15px;\">\n    <table>\n        <tr>\n            <td style=\"width: 50%;\">\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"Tax Invoice\") }}:</b>&nbsp; <span style=\"font-size: 10px\"><b>\n                        {% if doc.name %}\n                            {{ doc.name }}\n                        {% endif %}</b></span>\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"Invoice Date\") }}:</b>&nbsp; \n                        {% if doc.posting_date %}\n                            {{ doc.get_formatted(\"posting_date\") }}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"Sales Order No.\") }}:</b>&nbsp;\n                        {%for i in doc.items%}\n                        {%if i.idx==1%}\n                        {% if i.sales_order %}\n                            {{i.sales_order}}\n                        {% endif %}\n                        {% endif %}\n                        {%endfor%}\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"SO Date\") }}:</b>&nbsp;\n                        {%for i in doc.items%}\n                        {%if i.idx==1%}\n                        {% if i.sales_order %}\n                            {%- set so=frappe.get_doc(\"Sales Order\",i.sales_order) -%}\n                            {% if so.transaction_date %}\n                                {{so.get_formatted(\"transaction_date\")}}\n                            {% endif %}\n                        {% endif %}\n                        {% endif %}\n                        {%endfor%}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"PO No.\") }}:</b>&nbsp;\n                        {% if doc.po_no %} \n                            {{ doc.po_no }} \n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"PO Date\") }}:</b>&nbsp;\n                        {% if doc.po_date %}\n                            {{ doc.get_formatted(\"po_date\") }}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"State\") }}:</b>&nbsp;\n                        {% if address.gst_state %}\n                            {{address.gst_state}}\n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"State Code\") }}:</b>&nbsp;\n                        {% if doc.company_gstin %}\n                            {{doc.company_gstin[0:2]}}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"GSTIN\") }}:</b>&nbsp;\n                        {% if doc.company_gstin %}\n                            {{doc.company_gstin}}\n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"PAN\") }}:</b>&nbsp;\n                        {% if doc.company_gstin %}\n                            {{doc.company_gstin[2:-3]}}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"Invoice Type\") }}:</b>&nbsp; Regular\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"Reverse Charge \") }}:</b>&nbsp; \n                        {% if doc.reverse_charge %}\n                            {{ doc.reverse_charge }}\n                        {% endif %}\n                    </div>\n                </div>\n            </td>\n            <td style=\"width: 50%;\">\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">\n                        <b>{{ _(\"Transporter Name\") }}: </b>&nbsp;\n                        {% if doc.transporter_name %} \n                            {{ doc.transporter_name }} \n                        {% endif %}\n                    </div>\n                    \n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">\n                        <b>{{ _(\"Destination\") }}:</b>&nbsp;\n                        {%for i in doc.items%}\n                         {%if i.idx==1%}\n                        {% if i.sales_order %}\n                            {%- set so=frappe.get_doc(\"Sales Order\",i.sales_order) -%}\n                           {% if so.warehouse_address %}{{so.warehouse_address}}{% endif %}\n                        {% endif %}\n                        {% endif %}\n                        {%endfor%}\n                            \n                    </div>\n                </div> \n                <div class=\"row\">\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"Mode Of Trans.\") }}: </b>&nbsp;\n                        {% if doc.mode_of_transport %}\n                            {{ doc.mode_of_transport }}\n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"VEH No\")}}:</b>&nbsp;\n                        {% if doc.vehicle_no %}\n                            {{doc.vehicle_no}}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"LR No.\") }}: </b>&nbsp;\n                        {% if doc.lr_no %} \n                            {{ doc.lr_no }} \n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"LR Date\") }}: </b>&nbsp;\n                        {% if doc.lr_date %}\n                            {{ doc.get_formatted(\"lr_date\") }}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"Freight\") }}: </b>&nbsp;\n                         {%for i in doc.items%}\n                          {%if i.idx==1%}\n                        {% if i.sales_order %}\n                            {%- set so=frappe.get_doc(\"Sales Order\",i.sales_order) -%}\n                           {% if so.freight %}\n                            {{ so.freight }}\n                            {% endif %}\n                        {% endif %}\n                        {% endif %}\n                        {%endfor%}\n                        \n                    </div>\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"Due Date\") }}:</b>&nbsp; \n                        {% if doc.posting_date %}\n                            {{ doc.get_formatted(\"posting_date\") }}\n                        {% endif %}    \n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">\n                            <b>{{ _(\"Place Of Supply\") }}:</b>&nbsp;\n                            {% if s_address.city %} {{s_address.city}} {% endif %}\n                            {% if s_address.state %} &nbsp;-&nbsp;{{s_address.state}} {% endif %}\n                    </div>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"text-center\" style=\"width: 50%;\">\n                <b>{{ _(\"Details of Receiver(Bill to)\")}}</b>\n            </td>\n            <td class=\"text-center\" style=\"width: 50%;\">\n                <b>{{ _(\"Details of Consignee(Shipped to)\")}}</b>\n            </td>\n        </tr>\n        <tr>\n            <td style=\"width: 50%;\">\n                \n                <b>{{ _(\"Customer Name\") }}:&nbsp;\n                {% if b_address.address_title %}\n                    {{b_address.address_title}}\n                {% endif %} </b><br>\n                <b>{{ _(\"Address\") }}:</b>&nbsp; \n                {% if b_address.address_line1 %} \n                    {{b_address.address_line1}}, \n                {% endif %}<br>\n                {% if b_address.address_line2 %} \n                    {{b_address.address_line2}} ,\n                {% endif %}<br>\n                {% if b_address.city %} \n                    {{b_address.city}} \n                {% endif %}\n                {% if b_address.pincode %} \n                    -{{b_address.pincode}}, \n                {% endif %}\n                {% if b_address.gst_state %} \n                    {{b_address.gst_state}}, \n                {% endif %}\n                {% if b_address.country %} \n                    {{b_address.country}}.\n                {% endif %}<br>\n                <b>{{ _(\"Mobile No.\") }}:</b>&nbsp;\n                {% if b_address.phone %}\n                    {{b_address.phone}}\n                {% endif %}<br>\n                <b>{{ _(\"Email\") }}:</b>&nbsp;\n                {% if b_address.email_id %}\n                    {{b_address.email_id}}\n                {% endif %}<br>\n                <b>{{ _(\"Customer GSTIN\") }}:</b>&nbsp;\n                {% if b_address.gstin %}\n                    {{b_address.gstin}}\n                {% endif %}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                <b>{{ _(\"State Code\") }}:</b>&nbsp;\n                {% if b_address.gst_state_number %}\n                    {{b_address.gst_state_number}} \n                {% endif %}\n\n            </td>\n            <td style=\"width: 50%;\">\n                \n                <b>{{ _(\"Customer Name\") }}:&nbsp;\n                    {% if s_address.address_line1 %}\n                        {{s_address.address_title}}\n                    {% endif %}\n                </b><br>\n                <b>{{ _(\"Address\") }}:</b>&nbsp; \n                    {% if s_address.address_line1 %} \n                        {{s_address.address_line1}}, \n                    {% endif %}\n                <br>\n                {% if s_address.address_line2 %} \n                    {{s_address.address_line2}}, \n                {% endif %}<br>\n                {% if s_address.city %} \n                    {{s_address.city}} \n                {% endif %}\n                {% if s_address.pincode %} \n                    -{{s_address.pincode}}, \n                {% endif %}\n                {% if s_address.gst_state %} \n                    {{s_address.gst_state}}, \n                {% endif %}\n                {% if s_address.country %} \n                    {{s_address.country}}. \n                {% endif %}<br>\n                <b>{{ _(\"Mobile No.\") }}:</b>&nbsp;\n                {% if s_address.phone %}\n                    {{s_address.phone}}\n                {% endif %}<br>\n                <b>{{ _(\"Email\") }}:</b>&nbsp;\n                {% if s_address.email_id %}\n                    {{s_address.email_id}}\n                {% endif %}<br>\n                <b>{{ _(\"Customer GSTIN\") }}:</b>&nbsp;\n                {% if s_address.gstin %}\n                    {{s_address.gstin}}\n                {% endif %}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                <b>{{ _(\"State Code\") }}:</b>&nbsp;\n                    {% if s_address.gst_state_number %}\n                        {{s_address.gst_state_number}}\n                    {% endif %}\n            </td>\n        </tr>\n    </table>\n    <table style=\"margin-top: 2px;\">\n        <tr>\n            <th><b>{{ _(\"Sr No.\") }}</b></th>\n            <th><b>{{ _(\"Item Name\") }}</b></th>\n            <th><b>{{ _(\"HSN\") }}</b></th>\n            <th><b>{{ _(\"MFG Date\") }}</b></th>\n            <th><b>{{ _(\"EXP Date\") }}</b></th>\n            <th><b>{{ _(\"Qty Packing\") }}</b></th>\n            <th><b>{{ _(\"Rate\") }}</b></th>\n            \n            <th><b>{{ _(\"Amount\") }}</b></th>\n        </tr>\n        {%- for item in doc.items -%}\n        {% set batch %}{% endset %}\n        {% if item.batch_no %}\n            {% set batch = frappe.get_doc(\"Batch\",item.batch_no) %}\n        {% endif %}\n        <tr>\n            <td style=\"text-align: center;\">{{ loop.index }}</td>\n            <td>{{ item.item_name }}\n                {% if item.batch_no %}\n                    <br><span style=\"font-size: 9px\"><b>Batch:</b>&nbsp;\n                    {{ item.batch_no }}</span>\n                {% endif %}\n                {% if item.customer_item_code %}\n                    <br><span style=\"font-size: 9px\"><b>Cust. Item Name</b>&nbsp;\n                    {{ item.customer_item_code }}</span>\n                {% endif %}\n            </td>\n            <td>\n                {% if item.gst_hsn_code %}\n                    {{ item.gst_hsn_code }}\n                {% endif %}\n            </td>\n            <td style=\"text-align: center;\"> \n                {% if batch.manufacturing_date %}\n                    {{ batch.get_formatted(\"manufacturing_date\") }}\n                {% endif %}\n            </td>\n            <td style=\"text-align: center;\">\n                 {% if batch.expiry_date %}\n                    {{ batch.get_formatted(\"expiry_date\") }}\n                {% endif %}\n            </td>\n            <td style=\"text-align: center;\">\n              \n                {%if item.packing_weight%}\n                {% if item.total_weight %}\n                    {{item.total_weight}}\n                {% endif %}&nbsp;\n                {% if item.weight_uom %}\n                    {{item.weight_uom}}\n                {% endif %}<br>\n                  {{(item.qty/item.packing_weight) | int}} Nos X {{item.packing_weight | float}} KG PKG\n                {% endif %}\n                \n                {%if not item.packing_weight%}\n                \n                {% if item.total_weight %}\n                    {{item.total_weight}}\n                {% endif %}&nbsp;\n                {% if item.weight_uom %}\n                    {{item.weight_uom}}\n                {% endif %}<br>\n                {% if item.qty %}\n                    {{item.qty}}\n                {% endif %}&nbsp;\n                {% if item.uom %}\n                    {{item.uom}}\n                {% endif %}&nbsp;*&nbsp;\n                {% if item.conversion_factor %}\n                    {{item.conversion_factor}}\n                {% endif %}\n                {% endif %}\n            </td>\n            <td style=\"text-align: right;\">\n            {% if item.stock_uom_rate %}\n                {{ item.get_formatted(\"stock_uom_rate\") }}\n            {% endif %}</td>\n            \n            <td style=\"text-align: right;width:12%;\">\n            {% if item.amount %}\n                {{ item.get_formatted(\"amount\") }}\n            {% endif %}</td>\n        </tr>\n        {%- endfor -%}\n        <tr>\n            <th></th>\n            <th></th>\n            <th></th>\n            <th></th>\n            <th style=\"text-align: center;\"><b>{{ _(\"Total\") }}</b></th>\n            <th style=\"text-align: center;\"><b>{{doc.get_formatted(\"total_net_weight\")}}&nbsp;KG</b></th>\n            <th></th>\n            \n            <th style=\"text-align: right;\"><b>{{ doc.get_formatted(\"total\") }}</b></th>\n        </tr>\n    </table>\n    \n\n    <table style=\"margin-top: 2px;\">\n        <tr>\n            <td rowspan =\"{{ rowspan }}\" style =\"width:57%;\">\n                <b>Total Amount in Words:</b><br>\n                {% if doc.in_words %}\n                    {{ doc.in_words }}\n                {% endif %}\n                <hr style=\"margin-bottom: 2px;margin-top: 2px;\">\n                <b>Payment Terms:</b>&nbsp;\n                {% if doc.payment_terms_template %}\n                    {{doc.payment_terms_template}}\n                {% endif %}<br>\n                <b>{{ _(\"E-Waybill Number\") }}:</b>&nbsp;\n                {% if doc.ewaybill %}\n                    {{doc.ewaybill}}\n                {% endif %} &nbsp;&nbsp;\n                <b>{{ _(\"E-Waybill Date \") }}:</b>&nbsp; \n                {% if doc.e_way_bill_date %} \n                    {{doc.get_formatted(\"e_way_bill_date\")}}\n                {% endif %}\n            </td>\n            <td style =\"width:28%;\" class =\"text-right\">\n                <b>Total Amount:</b>\n            </td>\n            <td style =\"width:11%;\" class =\"text-right\">{{ doc.get_formatted(\"total\") }}</td>\n        </tr>\n        {% if doc.additional_discount_percentage %}\n            <tr>\n                <td style =\"width:28%;\" class =\"text-right\"><b>Additional Disc. on {{doc.apply_discount_on}}: &nbsp;{{doc.additional_discount_percentage}}%</b></td>\n                <td style =\"width:11%;\" class =\"text-right\"> -&nbsp;{{ doc.get_formatted(\"discount_amount\")}}</td>\n            </tr>\n        {% endif %}\n        <tr>\n            <td style =\"width:28%;\" class =\"text-right\"><b>Taxable Value:</b></td>\n            <td style =\"width:11%;\" class =\"text-right\"> &nbsp;\n            {{ doc.get_formatted(\"net_total\")}}</td>\n        </tr>\n        {%- for tax in doc.taxes -%}\n        <tr>\n            <td style =\"width:28%;\" class =\"text-right\">\n                <b>{{ tax.description }}</b>\n            </td>\n            <td style =\"width:11%;\" class =\"text-right\">\n                {{ tax.get_formatted(\"tax_amount\") }}\n            </td>\n        </tr>\n        {%- endfor -%}\n        <tr>\n            <td style =\"width:57%;\">\n                \n                <b>Account Name :</b>&nbsp;\n                {% if bd.account_name %}\n                    {{bd.account_name}}\n                {% endif %}<br>\n            </td>\n            <td style =\"width:28%;\" class =\"text-right\"><b>Total:</b></td>\n            <td style =\"width:11%;\" class =\"text-right\"> {{ doc.get_formatted(\"grand_total\")}}</td>\n        </tr>\n        <tr>\n            \n            <td style =\"width:57%;\"><b>Bank Name :</b>&nbsp;\n                {% if bd.bank %}\n                    {{bd.bank}}\n                {% endif %}\n                &nbsp;&nbsp;&nbsp;<b>Account Number :</b>&nbsp;\n                {% if bd.bank_account_no %}\n                    {{bd.bank_account_no}}\n                {% endif %}</td>\n            <td style =\"width:28%;\" class =\"text-right\"><b>Round Off Amount :</b></td>\n            <td style =\"width:11%;\" class =\"text-right\"> {{ doc.get_formatted(\"rounding_adjustment\")}}</td>\n        </tr>\n        <tr>\n            \n            <td style =\"width:57%;\"><b>IFSC Code :</b>&nbsp;\n                {% if bd.ifsc_code %}\n                    {{bd.ifsc_code}}\n                {% endif %}\n                &nbsp;&nbsp;&nbsp;<b>Branch Code :</b>&nbsp;\n                {% if bd.branch_code %}\n                    {{bd.branch_code}}\n                {% endif %}<br></td>\n            <td style =\"width:28%;\" class =\"text-right\"><b>Invoice Value :</b></td>\n            <td style =\"width:11%;\" class =\"text-right\"> {{ doc.get_formatted(\"rounded_total\")}}</td>\n        </tr>\n    </table>\n    {% if doc.other_charges_calculation %}\n    <div style=\"margin-top: -15px; margin-bottom: -15px;\">{{ doc.other_charges_calculation }} </div>\n    {% endif %}\n    <table style=\"margin-top: 0px;\">\n        <tr>\n            <td style =\"width:50%;\" rowspan =\"\"><b>Terms and Conditions :</b><br>\n                {% if doc.terms %}\n                    <span style=\"font-size: 7px;\">{{ doc.terms }}</span>\n                {% endif %}                \n            </td>\n            {% if company_upi.upi_qr_code_image %}\n                <td style=\"width: 20%\">\n                    <div><img src=\"{% if company_upi.upi_qr_code_image %}{{company_upi.upi_qr_code_image}}{% endif %}\" width=\"130\" height=\"130\"></div>\n                    <div class=\"text-center\"><b>UPI ID:{% if company_upi.upi_id %}{{ company_upi.upi_id }}{% endif %}</b></div>\n                </td>\n            {% endif %}\n            <td style=\"font-size:10px; width: 30%\"><br>\n                <p class=\"text-center\">For <b>\n                {% if doc.company %}\n                    {{doc.company}}\n                {% endif %}</b><br></p><br><br><br><br><br><br><br><br>\n                <p class =\"text-center\"><b>Authorised Signatory</b></p>\n            </td>\n        </tr>\n    </table>\n</div>\n\n<div class=\"page-break\"></div>\n\n<div class=\"row\">\n    <div class=\"col-xs-9\" style=\"text-align: left;font-size: 10px;\">\n        Invoice issued by under section 31 Rule 7 of CGST Act 2017 read with rule 1 of tax invoice.  \n    </div>\n    <div class=\"col-xs-3\" style=\"text-align: right;\">\n        <b>{{ _(\"Triplicate for Supplier\") }}</b>\n    </div>\n</div>\n<table>\n    <tr>\n        <td>\n            {% if letter_head %}\n                {{ letter_head }}\n            {% endif %}\n        </td>\n        {% if doc.qrcode_image %}\n            <td style=\"width: 18%;\">\n                <div><img src=\"{{doc.qrcode_image}}\"></div>\n            </td>\n        {% endif %}\n    </tr>\n</table>\n<table>\n    <tr>\n        <td style=\"text-align: center; font-size: 12px;\">\n            <b>TAX INVOICE</b>\n        </td>\n    </tr>\n</table>\n<div style=\"width:100%;font-size: 15px;\">\n    <table>\n        <tr>\n            <td style=\"width: 50%;\">\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"Tax Invoice\") }}:</b>&nbsp; <span style=\"font-size: 10px\"><b>\n                        {% if doc.name %}\n                            {{ doc.name }}\n                        {% endif %}</b></span>\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"Invoice Date\") }}:</b>&nbsp; \n                        {% if doc.posting_date %}\n                            {{ doc.get_formatted(\"posting_date\") }}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"Sales Order No.\") }}:</b>&nbsp;\n                        {%for i in doc.items%}\n                        {%if i.idx==1%}\n                        {% if i.sales_order %}\n                            {{i.sales_order}}\n                        {% endif %}\n                        {% endif %}\n                        {%endfor%}\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"SO Date\") }}:</b>&nbsp;\n                        {%for i in doc.items%}\n                        {%if i.idx==1%}\n                        {% if i.sales_order %}\n                            {%- set so=frappe.get_doc(\"Sales Order\",i.sales_order) -%}\n                            {% if so.transaction_date %}\n                                {{so.get_formatted(\"transaction_date\")}}\n                            {% endif %}\n                        {% endif %}\n                        {% endif %}\n                        {%endfor%}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"PO No.\") }}:</b>&nbsp;\n                        {% if doc.po_no %} \n                            {{ doc.po_no }} \n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"PO Date\") }}:</b>&nbsp;\n                        {% if doc.po_date %}\n                            {{ doc.get_formatted(\"po_date\") }}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"State\") }}:</b>&nbsp;\n                        {% if address.gst_state %}\n                            {{address.gst_state}}\n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"State Code\") }}:</b>&nbsp;\n                        {% if doc.company_gstin %}\n                            {{doc.company_gstin[0:2]}}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"GSTIN\") }}:</b>&nbsp;\n                        {% if doc.company_gstin %}\n                            {{doc.company_gstin}}\n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"PAN\") }}:</b>&nbsp;\n                        {% if doc.company_gstin %}\n                            {{doc.company_gstin[2:-3]}}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"Invoice Type\") }}:</b>&nbsp; Regular\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"Reverse Charge \") }}:</b>&nbsp; \n                        {% if doc.reverse_charge %}\n                            {{ doc.reverse_charge }}\n                        {% endif %}\n                    </div>\n                </div>\n            </td>\n            <td style=\"width: 50%;\">\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">\n                        <b>{{ _(\"Transporter Name\") }}: </b>&nbsp;\n                        {% if doc.transporter_name %} \n                            {{ doc.transporter_name }} \n                        {% endif %}\n                    </div>\n                    \n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">\n                        <b>{{ _(\"Destination\") }}:</b>&nbsp;\n                        {%for i in doc.items%}\n                         {%if i.idx==1%}\n                        {% if i.sales_order %}\n                            {%- set so=frappe.get_doc(\"Sales Order\",i.sales_order) -%}\n                           {% if so.warehouse_address %}{{so.warehouse_address}}{% endif %}\n                        {% endif %}\n                        {% endif %}\n                        {%endfor%}\n                            \n                    </div>\n                </div> \n                <div class=\"row\">\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"Mode Of Trans.\") }}: </b>&nbsp;\n                        {% if doc.mode_of_transport %}\n                            {{ doc.mode_of_transport }}\n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"VEH No\")}}:</b>&nbsp;\n                        {% if doc.vehicle_no %}\n                            {{doc.vehicle_no}}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"LR No.\") }}: </b>&nbsp;\n                        {% if doc.lr_no %} \n                            {{ doc.lr_no }} \n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"LR Date\") }}: </b>&nbsp;\n                        {% if doc.lr_date %}\n                            {{ doc.get_formatted(\"lr_date\") }}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"Freight\") }}: </b>&nbsp;\n                         {%for i in doc.items%}\n                          {%if i.idx==1%}\n                        {% if i.sales_order %}\n                            {%- set so=frappe.get_doc(\"Sales Order\",i.sales_order) -%}\n                           {% if so.freight %}\n                            {{ so.freight }}\n                            {% endif %}\n                        {% endif %}\n                        {% endif %}\n                        {%endfor%}\n                        \n                    </div>\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"Due Date\") }}:</b>&nbsp; \n                        {% if doc.posting_date %}\n                            {{ doc.get_formatted(\"posting_date\") }}\n                        {% endif %}    \n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">\n                            <b>{{ _(\"Place Of Supply\") }}:</b>&nbsp;\n                            {% if s_address.city %} {{s_address.city}} {% endif %}\n                            {% if s_address.state %} &nbsp;-&nbsp;{{s_address.state}} {% endif %}\n                    </div>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"text-center\" style=\"width: 50%;\">\n                <b>{{ _(\"Details of Receiver(Bill to)\")}}</b>\n            </td>\n            <td class=\"text-center\" style=\"width: 50%;\">\n                <b>{{ _(\"Details of Consignee(Shipped to)\")}}</b>\n            </td>\n        </tr>\n        <tr>\n            <td style=\"width: 50%;\">\n                \n                <b>{{ _(\"Customer Name\") }}:&nbsp;\n                {% if b_address.address_title %}\n                    {{b_address.address_title}}\n                {% endif %} </b><br>\n                <b>{{ _(\"Address\") }}:</b>&nbsp; \n                {% if b_address.address_line1 %} \n                    {{b_address.address_line1}}, \n                {% endif %}<br>\n                {% if b_address.address_line2 %} \n                    {{b_address.address_line2}} ,\n                {% endif %}<br>\n                {% if b_address.city %} \n                    {{b_address.city}} \n                {% endif %}\n                {% if b_address.pincode %} \n                    -{{b_address.pincode}}, \n                {% endif %}\n                {% if b_address.gst_state %} \n                    {{b_address.gst_state}}, \n                {% endif %}\n                {% if b_address.country %} \n                    {{b_address.country}}.\n                {% endif %}<br>\n                <b>{{ _(\"Mobile No.\") }}:</b>&nbsp;\n                {% if b_address.phone %}\n                    {{b_address.phone}}\n                {% endif %}<br>\n                <b>{{ _(\"Email\") }}:</b>&nbsp;\n                {% if b_address.email_id %}\n                    {{b_address.email_id}}\n                {% endif %}<br>\n                <b>{{ _(\"Customer GSTIN\") }}:</b>&nbsp;\n                {% if b_address.gstin %}\n                    {{b_address.gstin}}\n                {% endif %}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                <b>{{ _(\"State Code\") }}:</b>&nbsp;\n                {% if b_address.gst_state_number %}\n                    {{b_address.gst_state_number}} \n                {% endif %}\n\n            </td>\n            <td style=\"width: 50%;\">\n                \n                <b>{{ _(\"Customer Name\") }}:&nbsp;\n                    {% if s_address.address_line1 %}\n                        {{s_address.address_title}}\n                    {% endif %}\n                </b><br>\n                <b>{{ _(\"Address\") }}:</b>&nbsp; \n                    {% if s_address.address_line1 %} \n                        {{s_address.address_line1}}, \n                    {% endif %}\n                <br>\n                {% if s_address.address_line2 %} \n                    {{s_address.address_line2}}, \n                {% endif %}<br>\n                {% if s_address.city %} \n                    {{s_address.city}} \n                {% endif %}\n                {% if s_address.pincode %} \n                    -{{s_address.pincode}}, \n                {% endif %}\n                {% if s_address.gst_state %} \n                    {{s_address.gst_state}}, \n                {% endif %}\n                {% if s_address.country %} \n                    {{s_address.country}}. \n                {% endif %}<br>\n                <b>{{ _(\"Mobile No.\") }}:</b>&nbsp;\n                {% if s_address.phone %}\n                    {{s_address.phone}}\n                {% endif %}<br>\n                <b>{{ _(\"Email\") }}:</b>&nbsp;\n                {% if s_address.email_id %}\n                    {{s_address.email_id}}\n                {% endif %}<br>\n                <b>{{ _(\"Customer GSTIN\") }}:</b>&nbsp;\n                {% if s_address.gstin %}\n                    {{s_address.gstin}}\n                {% endif %}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                <b>{{ _(\"State Code\") }}:</b>&nbsp;\n                    {% if s_address.gst_state_number %}\n                        {{s_address.gst_state_number}}\n                    {% endif %}\n            </td>\n        </tr>\n    </table>\n    <table style=\"margin-top: 2px;\">\n        <tr>\n            <th><b>{{ _(\"Sr No.\") }}</b></th>\n            <th><b>{{ _(\"Item Name\") }}</b></th>\n            <th><b>{{ _(\"HSN\") }}</b></th>\n            <th><b>{{ _(\"MFG Date\") }}</b></th>\n            <th><b>{{ _(\"EXP Date\") }}</b></th>\n            <th><b>{{ _(\"Qty Packing\") }}</b></th>\n            <th><b>{{ _(\"Rate\") }}</b></th>\n            \n            <th><b>{{ _(\"Amount\") }}</b></th>\n        </tr>\n        {%- for item in doc.items -%}\n        {% set batch %}{% endset %}\n        {% if item.batch_no %}\n            {% set batch = frappe.get_doc(\"Batch\",item.batch_no) %}\n        {% endif %}\n        <tr>\n            <td style=\"text-align: center;\">{{ loop.index }}</td>\n            <td>{{ item.item_name }}\n                {% if item.batch_no %}\n                    <br><span style=\"font-size: 9px\"><b>Batch:</b>&nbsp;\n                    {{ item.batch_no }}</span>\n                {% endif %}\n                {% if item.customer_item_code %}\n                    <br><span style=\"font-size: 9px\"><b>Cust. Item Name</b>&nbsp;\n                    {{ item.customer_item_code }}</span>\n                {% endif %}\n            </td>\n            <td>\n                {% if item.gst_hsn_code %}\n                    {{ item.gst_hsn_code }}\n                {% endif %}\n            </td>\n            <td style=\"text-align: center;\"> \n                {% if batch.manufacturing_date %}\n                    {{ batch.get_formatted(\"manufacturing_date\") }}\n                {% endif %}\n            </td>\n            <td style=\"text-align: center;\">\n                 {% if batch.expiry_date %}\n                    {{ batch.get_formatted(\"expiry_date\") }}\n                {% endif %}\n            </td>\n            <td style=\"text-align: center;\">\n              \n                {%if item.packing_weight%}\n                {% if item.total_weight %}\n                    {{item.total_weight}}\n                {% endif %}&nbsp;\n                {% if item.weight_uom %}\n                    {{item.weight_uom}}\n                {% endif %}<br>\n                 {{(item.qty/item.packing_weight) | int}} Nos X {{item.packing_weight | float}} KG PKG\n                {% endif %}\n                \n                {%if not item.packing_weight%}\n                \n                {% if item.total_weight %}\n                    {{item.total_weight}}\n                {% endif %}&nbsp;\n                {% if item.weight_uom %}\n                    {{item.weight_uom}}\n                {% endif %}<br>\n                {% if item.qty %}\n                    {{item.qty}}\n                {% endif %}&nbsp;\n                {% if item.uom %}\n                    {{item.uom}}\n                {% endif %}&nbsp;*&nbsp;\n                {% if item.conversion_factor %}\n                    {{item.conversion_factor}}\n                {% endif %}\n                {% endif %}\n            </td>\n            <td style=\"text-align: right;\">\n            {% if item.stock_uom_rate %}\n                {{ item.get_formatted(\"stock_uom_rate\") }}\n            {% endif %}</td>\n            \n            <td style=\"text-align: right;width:12%;\">\n            {% if item.amount %}\n                {{ item.get_formatted(\"amount\") }}\n            {% endif %}</td>\n        </tr>\n        {%- endfor -%}\n        <tr>\n            <th></th>\n            <th></th>\n            <th></th>\n            <th></th>\n            <th style=\"text-align: center;\"><b>{{ _(\"Total\") }}</b></th>\n            <th style=\"text-align: center;\"><b>{{doc.get_formatted(\"total_net_weight\")}}&nbsp;KG</b></th>\n            <th></th>\n            \n            <th style=\"text-align: right;\"><b>{{ doc.get_formatted(\"total\") }}</b></th>\n        </tr>\n    </table>\n    \n\n    <table style=\"margin-top: 2px;\">\n        <tr>\n            <td rowspan =\"{{ rowspan }}\" style =\"width:57%;\">\n                <b>Total Amount in Words:</b><br>\n                {% if doc.in_words %}\n                    {{ doc.in_words }}\n                {% endif %}\n                <hr style=\"margin-bottom: 2px;margin-top: 2px;\">\n                <b>Payment Terms:</b>&nbsp;\n                {% if doc.payment_terms_template %}\n                    {{doc.payment_terms_template}}\n                {% endif %}<br>\n                <b>{{ _(\"E-Waybill Number\") }}:</b>&nbsp;\n                {% if doc.ewaybill %}\n                    {{doc.ewaybill}}\n                {% endif %} &nbsp;&nbsp;\n                <b>{{ _(\"E-Waybill Date \") }}:</b>&nbsp; \n                {% if doc.e_way_bill_date %} \n                    {{doc.get_formatted(\"e_way_bill_date\")}}\n                {% endif %}\n            </td>\n            <td style =\"width:28%;\" class =\"text-right\">\n                <b>Total Amount:</b>\n            </td>\n            <td style =\"width:11%;\" class =\"text-right\">{{ doc.get_formatted(\"total\") }}</td>\n        </tr>\n        {% if doc.additional_discount_percentage %}\n            <tr>\n                <td style =\"width:28%;\" class =\"text-right\"><b>Additional Disc. on {{doc.apply_discount_on}}: &nbsp;{{doc.additional_discount_percentage}}%</b></td>\n                <td style =\"width:11%;\" class =\"text-right\"> -&nbsp;{{ doc.get_formatted(\"discount_amount\")}}</td>\n            </tr>\n        {% endif %}\n        <tr>\n            <td style =\"width:28%;\" class =\"text-right\"><b>Taxable Value:</b></td>\n            <td style =\"width:11%;\" class =\"text-right\"> &nbsp;\n            {{ doc.get_formatted(\"net_total\")}}</td>\n        </tr>\n        {%- for tax in doc.taxes -%}\n        <tr>\n            <td style =\"width:28%;\" class =\"text-right\">\n                <b>{{ tax.description }}</b>\n            </td>\n            <td style =\"width:11%;\" class =\"text-right\">\n                {{ tax.get_formatted(\"tax_amount\") }}\n            </td>\n        </tr>\n        {%- endfor -%}\n        <tr>\n            <td style =\"width:57%;\">\n                \n                <b>Account Name :</b>&nbsp;\n                {% if bd.account_name %}\n                    {{bd.account_name}}\n                {% endif %}<br>\n            </td>\n            <td style =\"width:28%;\" class =\"text-right\"><b>Total:</b></td>\n            <td style =\"width:11%;\" class =\"text-right\"> {{ doc.get_formatted(\"grand_total\")}}</td>\n        </tr>\n        <tr>\n            \n            <td style =\"width:57%;\"><b>Bank Name :</b>&nbsp;\n                {% if bd.bank %}\n                    {{bd.bank}}\n                {% endif %}\n                &nbsp;&nbsp;&nbsp;<b>Account Number :</b>&nbsp;\n                {% if bd.bank_account_no %}\n                    {{bd.bank_account_no}}\n                {% endif %}</td>\n            <td style =\"width:28%;\" class =\"text-right\"><b>Round Off Amount :</b></td>\n            <td style =\"width:11%;\" class =\"text-right\"> {{ doc.get_formatted(\"rounding_adjustment\")}}</td>\n        </tr>\n        <tr>\n            \n            <td style =\"width:57%;\"><b>IFSC Code :</b>&nbsp;\n                {% if bd.ifsc_code %}\n                    {{bd.ifsc_code}}\n                {% endif %}\n                &nbsp;&nbsp;&nbsp;<b>Branch Code :</b>&nbsp;\n                {% if bd.branch_code %}\n                    {{bd.branch_code}}\n                {% endif %}<br></td>\n            <td style =\"width:28%;\" class =\"text-right\"><b>Invoice Value :</b></td>\n            <td style =\"width:11%;\" class =\"text-right\"> {{ doc.get_formatted(\"rounded_total\")}}</td>\n        </tr>\n    </table>\n    {% if doc.other_charges_calculation %}\n    <div style=\"margin-top: -15px; margin-bottom: -15px;\">{{ doc.other_charges_calculation }} </div>\n    {% endif %}\n    <table style=\"margin-top: 0px;\">\n        <tr>\n            <td style =\"width:50%;\" rowspan =\"\"><b>Terms and Conditions :</b><br>\n                {% if doc.terms %}\n                    <span style=\"font-size: 7px;\">{{ doc.terms }}</span>\n                {% endif %}                \n            </td>\n            {% if company_upi.upi_qr_code_image %}\n                <td style=\"width: 20%\">\n                    <div><img src=\"{% if company_upi.upi_qr_code_image %}{{company_upi.upi_qr_code_image}}{% endif %}\" width=\"130\" height=\"130\"></div>\n                    <div class=\"text-center\"><b>UPI ID:{% if company_upi.upi_id %}{{ company_upi.upi_id }}{% endif %}</b></div>\n                </td>\n            {% endif %}\n            <td style=\"font-size:10px; width: 30%\"><br>\n                <p class=\"text-center\">For <b>\n                {% if doc.company %}\n                    {{doc.company}}\n                {% endif %}</b><br></p><br><br><br><br><br><br><br><br>\n                <p class =\"text-center\"><b>Authorised Signatory</b></p>\n            </td>\n        </tr>\n    </table>\n</div>\n\n\n\n<div class=\"page-break\"></div>\n\n<div class=\"row\">\n    <div class=\"col-xs-9\" style=\"text-align: left;font-size: 10px;\">\n        Invoice issued by under section 31 Rule 7 of CGST Act 2017 read with rule 1 of tax invoice.  \n    </div>\n    <div class=\"col-xs-3\" style=\"text-align: right;\">\n        <b>{{ _(\"Extra Copy\") }}</b>\n    </div>\n</div>\n<table>\n    <tr>\n        <td>\n            {% if letter_head %}\n                {{ letter_head }}\n            {% endif %}\n        </td>\n        {% if doc.qrcode_image %}\n            <td style=\"width: 18%;\">\n                <div><img src=\"{{doc.qrcode_image}}\"></div>\n            </td>\n        {% endif %}\n    </tr>\n</table>\n<table>\n    <tr>\n        <td style=\"text-align: center; font-size: 12px;\">\n            <b>TAX INVOICE</b>\n        </td>\n    </tr>\n</table>\n<div style=\"width:100%;font-size: 15px;\">\n    <table>\n        <tr>\n            <td style=\"width: 50%;\">\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"Tax Invoice\") }}:</b>&nbsp; <span style=\"font-size: 10px\"><b>\n                        {% if doc.name %}\n                            {{ doc.name }}\n                        {% endif %}</b></span>\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"Invoice Date\") }}:</b>&nbsp; \n                        {% if doc.posting_date %}\n                            {{ doc.get_formatted(\"posting_date\") }}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"Sales Order No.\") }}:</b>&nbsp;\n                        {%for i in doc.items%}\n                        {%if i.idx==1%}\n                        {% if i.sales_order %}\n                            {{i.sales_order}}\n                        {% endif %}\n                        {% endif %}\n                        {%endfor%}\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"SO Date\") }}:</b>&nbsp;\n                        {%for i in doc.items%}\n                        {%if i.idx==1%}\n                        {% if i.sales_order %}\n                            {%- set so=frappe.get_doc(\"Sales Order\",i.sales_order) -%}\n                            {% if so.transaction_date %}\n                                {{so.get_formatted(\"transaction_date\")}}\n                            {% endif %}\n                        {% endif %}\n                        {% endif %}\n                        {%endfor%}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"PO No.\") }}:</b>&nbsp;\n                        {% if doc.po_no %} \n                            {{ doc.po_no }} \n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"PO Date\") }}:</b>&nbsp;\n                        {% if doc.po_date %}\n                            {{ doc.get_formatted(\"po_date\") }}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"State\") }}:</b>&nbsp;\n                        {% if address.gst_state %}\n                            {{address.gst_state}}\n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"State Code\") }}:</b>&nbsp;\n                        {% if doc.company_gstin %}\n                            {{doc.company_gstin[0:2]}}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"GSTIN\") }}:</b>&nbsp;\n                        {% if doc.company_gstin %}\n                            {{doc.company_gstin}}\n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"PAN\") }}:</b>&nbsp;\n                        {% if doc.company_gstin %}\n                            {{doc.company_gstin[2:-3]}}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-7\">\n                        <b>{{ _(\"Invoice Type\") }}:</b>&nbsp; Regular\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <b>{{ _(\"Reverse Charge \") }}:</b>&nbsp; \n                        {% if doc.reverse_charge %}\n                            {{ doc.reverse_charge }}\n                        {% endif %}\n                    </div>\n                </div>\n            </td>\n            <td style=\"width: 50%;\">\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">\n                        <b>{{ _(\"Transporter Name\") }}: </b>&nbsp;\n                        {% if doc.transporter_name %} \n                            {{ doc.transporter_name }} \n                        {% endif %}\n                    </div>\n                    \n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">\n                        <b>{{ _(\"Destination\") }}:</b>&nbsp;\n                        {%for i in doc.items%}\n                         {%if i.idx==1%}\n                        {% if i.sales_order %}\n                            {%- set so=frappe.get_doc(\"Sales Order\",i.sales_order) -%}\n                           {% if so.warehouse_address %}{{so.warehouse_address}}{% endif %}\n                        {% endif %}\n                        {% endif %}\n                        {%endfor%}\n                            \n                    </div>\n                </div> \n                <div class=\"row\">\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"Mode Of Trans.\") }}: </b>&nbsp;\n                        {% if doc.mode_of_transport %}\n                            {{ doc.mode_of_transport }}\n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"VEH No\")}}:</b>&nbsp;\n                        {% if doc.vehicle_no %}\n                            {{doc.vehicle_no}}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"LR No.\") }}: </b>&nbsp;\n                        {% if doc.lr_no %} \n                            {{ doc.lr_no }} \n                        {% endif %}\n                    </div>\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"LR Date\") }}: </b>&nbsp;\n                        {% if doc.lr_date %}\n                            {{ doc.get_formatted(\"lr_date\") }}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"Freight\") }}: </b>&nbsp;\n                         {%for i in doc.items%}\n                          {%if i.idx==1%}\n                        {% if i.sales_order %}\n                            {%- set so=frappe.get_doc(\"Sales Order\",i.sales_order) -%}\n                           {% if so.freight %}\n                            {{ so.freight }}\n                            {% endif %}\n                        {% endif %}\n                        {% endif %}\n                        {%endfor%}\n                        \n                    </div>\n                    <div class=\"col-xs-6\">\n                        <b>{{ _(\"Due Date\") }}:</b>&nbsp; \n                        {% if doc.posting_date %}\n                            {{ doc.get_formatted(\"posting_date\") }}\n                        {% endif %}    \n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">\n                            <b>{{ _(\"Place Of Supply\") }}:</b>&nbsp;\n                            {% if s_address.city %} {{s_address.city}} {% endif %}\n                            {% if s_address.state %} &nbsp;-&nbsp;{{s_address.state}} {% endif %}\n                    </div>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"text-center\" style=\"width: 50%;\">\n                <b>{{ _(\"Details of Receiver(Bill to)\")}}</b>\n            </td>\n            <td class=\"text-center\" style=\"width: 50%;\">\n                <b>{{ _(\"Details of Consignee(Shipped to)\")}}</b>\n            </td>\n        </tr>\n        <tr>\n            <td style=\"width: 50%;\">\n                \n                <b>{{ _(\"Customer Name\") }}:&nbsp;\n                {% if b_address.address_title %}\n                    {{b_address.address_title}}\n                {% endif %} </b><br>\n                <b>{{ _(\"Address\") }}:</b>&nbsp; \n                {% if b_address.address_line1 %} \n                    {{b_address.address_line1}}, \n                {% endif %}<br>\n                {% if b_address.address_line2 %} \n                    {{b_address.address_line2}} ,\n                {% endif %}<br>\n                {% if b_address.city %} \n                    {{b_address.city}} \n                {% endif %}\n                {% if b_address.pincode %} \n                    -{{b_address.pincode}}, \n                {% endif %}\n                {% if b_address.gst_state %} \n                    {{b_address.gst_state}}, \n                {% endif %}\n                {% if b_address.country %} \n                    {{b_address.country}}.\n                {% endif %}<br>\n                <b>{{ _(\"Mobile No.\") }}:</b>&nbsp;\n                {% if b_address.phone %}\n                    {{b_address.phone}}\n                {% endif %}<br>\n                <b>{{ _(\"Email\") }}:</b>&nbsp;\n                {% if b_address.email_id %}\n                    {{b_address.email_id}}\n                {% endif %}<br>\n                <b>{{ _(\"Customer GSTIN\") }}:</b>&nbsp;\n                {% if b_address.gstin %}\n                    {{b_address.gstin}}\n                {% endif %}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                <b>{{ _(\"State Code\") }}:</b>&nbsp;\n                {% if b_address.gst_state_number %}\n                    {{b_address.gst_state_number}} \n                {% endif %}\n\n            </td>\n            <td style=\"width: 50%;\">\n                \n                <b>{{ _(\"Customer Name\") }}:&nbsp;\n                    {% if s_address.address_line1 %}\n                        {{s_address.address_title}}\n                    {% endif %}\n                </b><br>\n                <b>{{ _(\"Address\") }}:</b>&nbsp; \n                    {% if s_address.address_line1 %} \n                        {{s_address.address_line1}}, \n                    {% endif %}\n                <br>\n                {% if s_address.address_line2 %} \n                    {{s_address.address_line2}}, \n                {% endif %}<br>\n                {% if s_address.city %} \n                    {{s_address.city}} \n                {% endif %}\n                {% if s_address.pincode %} \n                    -{{s_address.pincode}}, \n                {% endif %}\n                {% if s_address.gst_state %} \n                    {{s_address.gst_state}}, \n                {% endif %}\n                {% if s_address.country %} \n                    {{s_address.country}}. \n                {% endif %}<br>\n                <b>{{ _(\"Mobile No.\") }}:</b>&nbsp;\n                {% if s_address.phone %}\n                    {{s_address.phone}}\n                {% endif %}<br>\n                <b>{{ _(\"Email\") }}:</b>&nbsp;\n                {% if s_address.email_id %}\n                    {{s_address.email_id}}\n                {% endif %}<br>\n                <b>{{ _(\"Customer GSTIN\") }}:</b>&nbsp;\n                {% if s_address.gstin %}\n                    {{s_address.gstin}}\n                {% endif %}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                <b>{{ _(\"State Code\") }}:</b>&nbsp;\n                    {% if s_address.gst_state_number %}\n                        {{s_address.gst_state_number}}\n                    {% endif %}\n            </td>\n        </tr>\n    </table>\n    <table style=\"margin-top: 2px;\">\n        <tr>\n            <th><b>{{ _(\"Sr No.\") }}</b></th>\n            <th><b>{{ _(\"Item Name\") }}</b></th>\n            <th><b>{{ _(\"HSN\") }}</b></th>\n            <th><b>{{ _(\"MFG Date\") }}</b></th>\n            <th><b>{{ _(\"EXP Date\") }}</b></th>\n            <th><b>{{ _(\"Qty Packing\") }}</b></th>\n            <th><b>{{ _(\"Rate\") }}</b></th>\n            \n            <th><b>{{ _(\"Amount\") }}</b></th>\n        </tr>\n        {%- for item in doc.items -%}\n        {% set batch %}{% endset %}\n        {% if item.batch_no %}\n            {% set batch = frappe.get_doc(\"Batch\",item.batch_no) %}\n        {% endif %}\n        <tr>\n            <td style=\"text-align: center;\">{{ loop.index }}</td>\n            <td>{{ item.item_name }}\n                {% if item.batch_no %}\n                    <br><span style=\"font-size: 9px\"><b>Batch:</b>&nbsp;\n                    {{ item.batch_no }}</span>\n                {% endif %}\n                {% if item.customer_item_code %}\n                    <br><span style=\"font-size: 9px\"><b>Cust. Item Name</b>&nbsp;\n                    {{ item.customer_item_code }}</span>\n                {% endif %}\n            </td>\n            <td>\n                {% if item.gst_hsn_code %}\n                    {{ item.gst_hsn_code }}\n                {% endif %}\n            </td>\n            <td style=\"text-align: center;\"> \n                {% if batch.manufacturing_date %}\n                    {{ batch.get_formatted(\"manufacturing_date\") }}\n                {% endif %}\n            </td>\n            <td style=\"text-align: center;\">\n                 {% if batch.expiry_date %}\n                    {{ batch.get_formatted(\"expiry_date\") }}\n                {% endif %}\n            </td>\n            <td style=\"text-align: center;\">\n              \n                {%if item.packing_weight%}\n                {% if item.total_weight %}\n                    {{item.total_weight}}\n                {% endif %}&nbsp;\n                {% if item.weight_uom %}\n                    {{item.weight_uom}}\n                {% endif %}<br>\n                {{(item.qty/item.packing_weight) | int}} Nos X {{item.packing_weight | float}} KG PKG\n                {% endif %}\n                \n                {%if not item.packing_weight%}\n                \n                {% if item.total_weight %}\n                    {{item.total_weight}}\n                {% endif %}&nbsp;\n                {% if item.weight_uom %}\n                    {{item.weight_uom}}\n                {% endif %}<br>\n                {% if item.qty %}\n                    {{item.qty}}\n                {% endif %}&nbsp;\n                {% if item.uom %}\n                    {{item.uom}}\n                {% endif %}&nbsp;*&nbsp;\n                {% if item.conversion_factor %}\n                    {{item.conversion_factor}}\n                {% endif %}\n                {% endif %}\n            </td>\n            <td style=\"text-align: right;\">\n            {% if item.stock_uom_rate %}\n                {{ item.get_formatted(\"stock_uom_rate\") }}\n            {% endif %}</td>\n            \n            <td style=\"text-align: right;width:12%;\">\n            {% if item.amount %}\n                {{ item.get_formatted(\"amount\") }}\n            {% endif %}</td>\n        </tr>\n        {%- endfor -%}\n        <tr>\n            <th></th>\n            <th></th>\n            <th></th>\n            <th></th>\n            <th style=\"text-align: center;\"><b>{{ _(\"Total\") }}</b></th>\n            <th style=\"text-align: center;\"><b>{{doc.get_formatted(\"total_net_weight\")}}&nbsp;KG</b></th>\n            <th></th>\n            \n            <th style=\"text-align: right;\"><b>{{ doc.get_formatted(\"total\") }}</b></th>\n        </tr>\n    </table>\n    \n\n    <table style=\"margin-top: 2px;\">\n        <tr>\n            <td rowspan =\"{{ rowspan }}\" style =\"width:57%;\">\n                <b>Total Amount in Words:</b><br>\n                {% if doc.in_words %}\n                    {{ doc.in_words }}\n                {% endif %}\n                <hr style=\"margin-bottom: 2px;margin-top: 2px;\">\n                <b>Payment Terms:</b>&nbsp;\n                {% if doc.payment_terms_template %}\n                    {{doc.payment_terms_template}}\n                {% endif %}<br>\n                <b>{{ _(\"E-Waybill Number\") }}:</b>&nbsp;\n                {% if doc.ewaybill %}\n                    {{doc.ewaybill}}\n                {% endif %} &nbsp;&nbsp;\n                <b>{{ _(\"E-Waybill Date \") }}:</b>&nbsp; \n                {% if doc.e_way_bill_date %} \n                    {{doc.get_formatted(\"e_way_bill_date\")}}\n                {% endif %}\n            </td>\n            <td style =\"width:28%;\" class =\"text-right\">\n                <b>Total Amount:</b>\n            </td>\n            <td style =\"width:11%;\" class =\"text-right\">{{ doc.get_formatted(\"total\") }}</td>\n        </tr>\n        {% if doc.additional_discount_percentage %}\n            <tr>\n                <td style =\"width:28%;\" class =\"text-right\"><b>Additional Disc. on {{doc.apply_discount_on}}: &nbsp;{{doc.additional_discount_percentage}}%</b></td>\n                <td style =\"width:11%;\" class =\"text-right\"> -&nbsp;{{ doc.get_formatted(\"discount_amount\")}}</td>\n            </tr>\n        {% endif %}\n        <tr>\n            <td style =\"width:28%;\" class =\"text-right\"><b>Taxable Value:</b></td>\n            <td style =\"width:11%;\" class =\"text-right\"> &nbsp;\n            {{ doc.get_formatted(\"net_total\")}}</td>\n        </tr>\n        {%- for tax in doc.taxes -%}\n        <tr>\n            <td style =\"width:28%;\" class =\"text-right\">\n                <b>{{ tax.description }}</b>\n            </td>\n            <td style =\"width:11%;\" class =\"text-right\">\n                {{ tax.get_formatted(\"tax_amount\") }}\n            </td>\n        </tr>\n        {%- endfor -%}\n        <tr>\n            <td style =\"width:57%;\">\n                \n                <b>Account Name :</b>&nbsp;\n                {% if bd.account_name %}\n                    {{bd.account_name}}\n                {% endif %}<br>\n            </td>\n            <td style =\"width:28%;\" class =\"text-right\"><b>Total:</b></td>\n            <td style =\"width:11%;\" class =\"text-right\"> {{ doc.get_formatted(\"grand_total\")}}</td>\n        </tr>\n        <tr>\n            \n            <td style =\"width:57%;\"><b>Bank Name :</b>&nbsp;\n                {% if bd.bank %}\n                    {{bd.bank}}\n                {% endif %}\n                &nbsp;&nbsp;&nbsp;<b>Account Number :</b>&nbsp;\n                {% if bd.bank_account_no %}\n                    {{bd.bank_account_no}}\n                {% endif %}</td>\n            <td style =\"width:28%;\" class =\"text-right\"><b>Round Off Amount :</b></td>\n            <td style =\"width:11%;\" class =\"text-right\"> {{ doc.get_formatted(\"rounding_adjustment\")}}</td>\n        </tr>\n        <tr>\n            \n            <td style =\"width:57%;\"><b>IFSC Code :</b>&nbsp;\n                {% if bd.ifsc_code %}\n                    {{bd.ifsc_code}}\n                {% endif %}\n                &nbsp;&nbsp;&nbsp;<b>Branch Code :</b>&nbsp;\n                {% if bd.branch_code %}\n                    {{bd.branch_code}}\n                {% endif %}<br></td>\n            <td style =\"width:28%;\" class =\"text-right\"><b>Invoice Value :</b></td>\n            <td style =\"width:11%;\" class =\"text-right\"> {{ doc.get_formatted(\"rounded_total\")}}</td>\n        </tr>\n    </table>\n    {% if doc.other_charges_calculation %}\n    <div style=\"margin-top: -15px; margin-bottom: -15px;\">{{ doc.other_charges_calculation }} </div>\n    {% endif %}\n    <table style=\"margin-top: 0px;\">\n        <tr>\n            <td style =\"width:50%;\" rowspan =\"\"><b>Terms and Conditions :</b><br>\n                {% if doc.terms %}\n                    <span style=\"font-size: 7px;\">{{ doc.terms }}</span>\n                {% endif %}                \n            </td>\n            {% if company_upi.upi_qr_code_image %}\n                <td style=\"width: 20%\">\n                    <div><img src=\"{% if company_upi.upi_qr_code_image %}{{company_upi.upi_qr_code_image}}{% endif %}\" width=\"130\" height=\"130\"></div>\n                    <div class=\"text-center\"><b>UPI ID:{% if company_upi.upi_id %}{{ company_upi.upi_id }}{% endif %}</b></div>\n                </td>\n            {% endif %}\n            <td style=\"font-size:10px; width: 30%\"><br>\n                <p class=\"text-center\">For <b>\n                {% if doc.company %}\n                    {{doc.company}}\n                {% endif %}</b><br></p><br><br><br><br><br><br><br><br>\n                <p class =\"text-center\"><b>Authorised Signatory</b></p>\n            </td>\n        </tr>\n    </table>\n</div>\n",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2021-07-23 14:37:05.389645",
 "modified_by": "Administrator",
 "module": "Selling",
 "name": "Sales Invoice Format",
 "owner": "Administrator",
 "print_format_builder": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}